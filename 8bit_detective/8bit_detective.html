<html><meta charset="UTF-8">
<head>
<script src='../common.js'></script>
</head>
<body>
<p>This page tests seamlessly looping playback of a highly compressed 8kHz quality music clip. Files:
<pre>8bit_detective_44100hz_1411kbs_stereo_int16.wav: Downloaded from https://www.dl-sounds.com/royalty-free/, license: https://www.dl-sounds.com/license/
8bit_detective_8000hz_128kbs_mono_int16.wav: Converted from 8bit_detective_44100hz_1411kbs_stereo_int16.wav with Audacity 2.1.3 Win64
8bit_detective_8000hz_14kbs_mono.ogg: Converted from 8bit_detective_8000hz_706kbs_mono_int16.wav with Audacity 2.1.3 Win64, with option Quality: 0
8bit_detective_8000hz_11kbs_mono_ffmpeg2.2.2_aac.m4a: Converted from 8bit_detective_44100hz_1411kbs_stereo_int16.wav with Audacity 2.1.3 Win64 + FFmpeg 2.2.2, with option Quality: 10
8bit_detective_8000hz_8kbs_mono_lame3.99.mp3: Converted from 8bit_detective_44100hz_1411kbs_stereo_int16.wav with Audacity 2.1.3 Win64 + Lame MP3 encoder 3.99.3, with options Bit Rate Mode: Average, Quality: 8 kbps, Channel Mode: Force export to mono</pre>
<p>Play uncompressed (Web Audio + AudioBufferSourceNode + decodeAudioData() to AudioBuffer):
<div id='uncompressed'></div>
<p>Play compressed (&lt;audio&gt; element playing a Blob embedded as MediaElementAudioSource to Web Audio graph):
<div id='compressed'></div>
<p>Current memory usage: <span id='memory'>0</span> bytes.
<div id='result'></div>

<script type="text/javascript">
var urls = [
  '8bit_detective_44100hz_1411kbs_stereo_int16.wav',
  '8bit_detective_8000hz_128kbs_mono_int16.wav',
  '8bit_detective_8000hz_14kbs_mono.ogg',
  '8bit_detective_8000hz_11kbs_mono_ffmpeg2.2.2_aac.m4a',
  '8bit_detective_8000hz_8kbs_mono_lame3.99.mp3'
];

var options = {
  loop: true
};

var html = '';
for(var i in urls) {
  var url = urls[i];
  html += "<div><input type=button value='"+url+"' onclick=playClipUncompressed("+i+",options)> <span id=uncompressed_size_"+i+"></span></div>";
}
document.getElementById('uncompressed').innerHTML = html;
html = '';
for(var i in urls) {
  var url = urls[i];
  html += "<div><input type=button value='"+url+"' onclick=playClipCompressed("+i+",options)> <span id=compressed_size_"+i+"></span></div>";
}
document.getElementById('compressed').innerHTML = html;
</script>
</body>
</html>
